version: '3'

tasks:
  init: 
    desc: Init ~ dir
    # requires:
    #   vars:
    #     - ROOT_DIR
    cmds: 
      - mkdir -p ~/workspace
      - mkdir -p ~/.local/bin ~/.local/lib ~/.local/envs ~/.local/bash-completion/completions
      - mkdir -p ~/.config ~/.fonts

      - if [ -f ~/.bash_aliases ]; then rm -rf ~/.bash_aliases; fi
      
      # - if [ -f ~/.local/lib/bash_dotfiles ]
      
  init&verify:
    desc: task init and verify
    deps:
      - init
    cmds: 
      - "[[ -d ~/workspace ]]" 
      - "[[ -d ~/.local/bin ]] && [[ -d ~/.local/lib ]] && [[ -d ~/.local/envs ]] && [[ -d ~/.local/bash-completion/completions ]]"
      - "[[ -d ~/.config ]] && [[ -d ~/.config ]]"
      - echo DONE!
  setup: 
    desc: Setup ~ dir - bins and configs
    vars:
      BINS: 
        sh: ls -A {{ .TASKFILE_DIR }}/.local/bin/