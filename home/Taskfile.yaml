version: '3'

tasks:
  init: 
    desc: Init ~ dir
    # requires:
    #   vars:
    #     - ROOT_DIR
    cmds: 
      - mkdir -p ~/workspace
      - mkdir -p ~/.local/bin ~/.local/lib ~/.local/envs ~/.local/bash-completion/completions
      - mkdir -p ~/.config ~/.fonts
      - ln -s {{ .TASKFILE_DIR }}/.bash_aliases ~/.bash_aliases
      # - for:
      #     - .local/envs
      #     - .fonts
      #   cmd: |
      #     echo {{ .ITEM }}
      #     # if [ -d {{ .ITEM }} ]; then rm -rf {{ .ITEM }}; fi
      #     # ln -sf ${ .TASKFILE_DIR }/.fonts ~/.fonts
      # - for:
      #     var: BINS
      #   cmd: hu
  init&verify:
    desc: task init and verify
    deps:
      - init
    cmds: 
      - "[[ -d ~/workspace ]]" 
      - "[[ -d ~/.local/bin ]] && [[ -d ~/.local/lib ]] && [[ -d ~/.local/envs ]] && [[ -d ~/.local/bash-completion/completions ]]"
      - "[[ -d ~/.config ]] && [[ -d ~/.config ]]"
      - echo DONE!
  setup: 
    desc: Setup ~ dir - bins and configs
    vars:
      BINS: 
        sh: ls -A {{ .TASKFILE_DIR }}/.local/bin/